\chapter{总结与展望}
    
    \section{总结}
        本文为web API的使用和测试建立了形式化的场景模型, 并基于该场景模型提出了web API的自动化测试方法. 本文对场景模型和自动化测试方法使用实验进行了详细的评估, 从多方面验证了其有效性. 最后, 本文介绍了Lapis, Lapis工具提供了对场景模型和自动化测试方法的完整实现.
        
        场景模型基于概率有限状态自动机, 为了将之与API服务端点进行关联, 并表达数据流和控制流的约束、依赖与断言等, 本文对自动机模型进行了扩展, 并给出了扩展后的场景模型的形式化定义. 基于场景模型, 本文提出了一种自动测试方法, 详细阐述了如何从场景模型进行自动化的请求数据生成与执行序列生成, 并讨论了进一步扩展至启发式执行序列生成的初步思想. 然后, 本文在工具原型中实现了这一基于场景模型的自动化测试方法, 工具原型使用OpenAPI规约语言描述的API行为文档, YAML格式的场景模型文档, 与YAML格式的测试配置文档, 一同作为输入, 然后自动化生成并执行测试, 并输出测试用例及其执行结果. 使用工具原型, 本文在三个真实API服务上进行了实验, 并从四个方面评估了方法的表现与性能. 实验结果表明, 本文提出的测试方法可以生成具有多样性与高覆盖率的测试用例, 显著提高测试效率, 并检测出真实系统中的故障, 具有实际使用价值.
    
    \section{展望}
    
        本工作还可以从以下几个方面进一步改进和扩展:
        \begin{itemize}
            \item 提升自动化程度:\\
            一方面, 可以进一步开发完成场景综合编辑与管理系统, 将人工书写场景模型脚本改进为用可视化方式绘制场景模型; 另一方面, 如\ref{sec:scenario_build}小节的讨论, 可以进一步探究从API描述文档和用户日志中挖掘API调用序列, 并从序列中全自动生成场景模型的方法.
            
            \item 启发式测试序列生成:\\
            目前的测试执行序列生成算法基于场景模型给出的概率分布, 可以改进为启发式算法. 虽然初步的启发式算法尝试表现效果并不理想, 但还可以进一步尝试更复杂的启发式算法, 进行更智能的测试序列生成, 以进一步提高测试用例的覆盖率, 并降低测试用例的冗余度.
            
            \item 大规模实验验证:\\
            为提高本文实验结论的说服力, 可在更大规模的实际web API应用中进行进一步的评估, 或者引入白盒指标如代码覆盖率和分支覆盖率, 来评估生成的测试用例质量.
        \end{itemize}
        
        我们期待着, 在未来, 本文提出的场景模型和测试方法, 可以完善成为完整的工具链与生态链, 得到工业界的广泛运用, 从而提高软件测试的效率和质量.
